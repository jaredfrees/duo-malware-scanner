#include header.h

typedef struct _badProcs{
	struct task_struct *badProc;
	struct _badProcs *next;	
} badProcs;

badProcs* addBadProc(struct task_struct p){
	badProcs *bp = malloc(sizeof(badProcs);
	if(bp){
		bp->badProc=p;	
	}
	return bp;
}

void scanproc(String keywd){
	struct task_struct *proc;
	badProcs *mlwList = NULL;
	for_each_process(proc){
		if(strstr(proc->comm, keywd) != NULL){
			badProcs *newProc = addBadProc(proc);
			if(newProc){
				newProc->next = mlwList;
				mlwList = newProc;
			}
			
		}
	}
	if(mlwList == NULL){
		printf("No Processes found with keyword %s.\n", keywd);	
	}else{
		badProcs *head = mlwlist;
		while(head != NULL){
			char killComm;
			printf("Process %s found. Would you like to delete it? y/n:", head->badProc->comm);
			scanf("%c\n", &killComm);
			while(killComm != 'y' || killComm != 'n'){
				printf("NOT A VIABLE USER INPUT!! >:(\n");
				printf("Process %s found. Would you like to delete it? y/n:", head->badProc->comm);
				scanf("%c\n", &killComm);		
			}
			if(killComm == 'y'){
				kill(head->badProc->pid, SIGTERM);			
			}
					
		}		
	}

}
