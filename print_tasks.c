static unsigned long print_task_by_name(const char* str, int search_type) {
  // The struct used for info of a process
  struct task_struct* task;
  
  char keyword[MAX_PROCESS_STRING_LEN];
  
  int numFound = 0;
  
  if (copy_from_user(keyword, str, MAX_PROCESS_STRING_LEN)) {
    return -EFAULT;
  }
  keyword[MAX_PROCESS_STRING_LEN-1] = 0;
  
  if (search_type == 0) 
    print_string("Processes matching keyword:");
  else if (search_type == 1)
    print_string("Processes with substring of keyword:");
          
  // Go over through the list of processes
  for_each_process(task) {
    //printk("Task: %s", (task->comm));

    if (search_type == 0) {
      if (!(strcmp((task->comm), keyword))) {
        numFound++;
        printk("Matching process #%d: \"%s\" with PID: %d\n", numFound, task->comm, task->pid);
        print_string((task->comm));
      }
    }
    else if (search_type == 1) {
      if (strstr(task->comm, keyword) != NULL) {
        numFound++;
        printk("Substring matching process #%d: \"%s\" with PID: %d and keyword: %s\n", 
                numFound, task->comm, task->pid, keyword);
        print_string((task->comm));
      }
    }
  }
  if (!numFound) {
    print_string("No matching processes found.");
  }
  

  return 0;
}
