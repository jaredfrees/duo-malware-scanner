static unsigned long kill_processes(const char* str) {
  char keyword[MAX_INPUT_SIZE];
	struct task_struct *proc;
  int ret;
  int numFound = 0;
  int signum = SIGKILL;
  struct siginfo info;
  
  if (copy_from_user(keyword, str, MAX_INPUT_SIZE)) {
    return -EFAULT;
  }
  //terminate string with null character
  keyword[MAX_INPUT_SIZE-1] = 0;
  
	for_each_process(proc) {
		if (!(strcmp((proc->comm), keyword))) {
		  printk("Kill process: \"%s\" with PID: %d\n", (proc->comm), (proc->pid));
      numFound++;
      
      memset(&info, 0, sizeof(struct siginfo));
      info.si_signo = signum;
      ret = send_sig_info(signum, &info, proc);
      if (ret < 0) {
        print_string_var("Could not kill process: ", (proc->comm));
      }
      else {
        print_string_var("Killed process: ", (proc->comm));
      }
		}
	}
	if (!numFound) {
    printk(KERN_INFO "No processes found to kill matching keyword: \"%s\"\n", keyword);
    print_string("No matching processes found to kill.");
  }

  return numFound;
}
