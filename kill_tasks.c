static unsigned long kill_processes(const char* str) {
  char keyword[MAX_PROCESS_STRING_LEN];
	struct task_struct *proc;
  int ret;
  int signum = SIGKILL;
  struct siginfo info;
  
  int numFound = 0;
  
  if (copy_from_user(keyword, str, MAX_PROCESS_STRING_LEN)) {
    return -EFAULT;
  }
  keyword[MAX_PROCESS_STRING_LEN-1] = 0;
  
  
	for_each_process(proc) {
	  //printk("Proc: %s , Check: %s", (proc->comm), keyword);
		if (!(strcmp((proc->comm), keyword))) {
		  printk("Kill process: \"%s\" with PID: %d\n", (proc->comm), (proc->pid));
      numFound++;
      
      memset(&info, 0, sizeof(struct siginfo));
      info.si_signo = signum;
      ret = send_sig_info(signum, &info, proc);
      if (ret < 0) {
        print_string_var("Could not kill process: ", (proc->comm));
      }
      else {
        print_string_var("Killed process: ", (proc->comm));
      }
		}
	}
	if (!numFound) {
    print_string("No matching processes found to kill.");
	}

  return 0;
}
